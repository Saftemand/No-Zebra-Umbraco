var myApp = angular.module("myApp", []), readAllTags = function () { var o = $("#txt_tag_holder").val(), e = o.split(" ").join(","); return e }, updateView = function (o, e) { this.update = function (t) { var a = readAllTags(), r = $("#chbx-sort").prop("checked"); if (console.log("sortByDate: " + r), "" !== a) { var l = { tags: a, sortByDate: r, firstOrLast: t }; e.post("/umbraco/Surface/FeedSurface/LoadPhotos", l).success(function (e) { o.photoCollection = JSON.parse(e), console.log(o.photoCollection.items), o.update = updateView, "first" === t ? $("#btn-load-more").removeClass("hidden") : "last" === t && $("#btn-load-more").addClass("hidden") }).error(function (o) { console.log(o) }) } } }; updateView.$inject = ["$scope", "$http"], myApp.controller("MyController", updateView), $().ready(function () { $("#btn-load-more").click(updateView) });