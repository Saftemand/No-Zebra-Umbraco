(function(n,t){"use strict";function u(n,t){for(var u,e=[],i=0;i<n.length;++i){if(u=r[n[i]]||f(n[i]),!u)throw"module definition dependecy not found: "+n[i];e.push(u)}t.apply(null,e)}function i(n,i,f){if(typeof n!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(i,function(){r[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function e(i){for(var f,o=0;o<i.length;o++){var e=n,s=i[o],u=s.split(/[.\/]/);for(f=0;f<u.length-1;++f)e[u[f]]===t&&(e[u[f]]={}),e=e[u[f]];e[u[u.length-1]]=r[s]}}var r={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(n,t,i){function r(t,i){return n.each(i,function(n){t=n.constructor==RegExp?t.replace(n,""):t.replace(n[0],n[1])}),t}function u(u){function o(n){var t=n.name,i=n;if(t==="br"){f+="\n";return}if(h[t]&&(f+=" "),c[t]){f+=" ";return}if(n.type==3&&(f+=n.value),!n.shortEnded&&(n=n.firstChild))do o(n);while(n=n.next);l[t]&&i.next&&(f+="\n",t=="p"&&(f+="\n"))}var e=new i,s=new t({},e),f="",h=e.getShortEndedElements(),c=n.makeMap("script noscript style textarea video audio iframe object"," "),l=e.getBlockElements();return u=r(u,[/<!\[[^\]]+\]>/g]),o(s.parse(u)),f}function f(n){function t(n,t,i){return!t&&!i?" ":" "}return r(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i])}return{filter:r,innerText:u,trimHtml:f}});i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(n,t,i,r){return function(u){function s(n){var t,r=u.dom,i;t=u.fire("BeforePastePreProcess",{content:n});t=u.fire("PastePreProcess",t);n=t.content;t.isDefaultPrevented()||(u.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()&&(i=r.add(u.getBody(),"div",{style:"display:none"},n),t=u.fire("PastePostProcess",{node:i}),r.remove(i),n=t.node.innerHTML),t.isDefaultPrevented()||u.insertContent(n,{merge:u.settings.paste_merge_formats!==!1}))}function a(n){n=u.dom.encode(n).replace(/\r\n/g,"\n");var f=u.dom.getParent(u.selection.getStart(),u.dom.isBlock),i=u.settings.forced_root_block,t;i&&(t=u.dom.createHTML(i,u.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">");f&&/^(PRE|DIV)$/.test(f.nodeName)||!i?n=r.filter(n,[[/\n/g,"<br>"]]):(n=r.filter(n,[[/\n\n/g,"<\/p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),n.indexOf("<p>")!=-1&&(n=t+n));s(n)}function p(){function v(n){var r,u,i,f=n.startContainer;if(r=n.getClientRects(),r.length)return r[0];if(n.collapsed&&f.nodeType==1){for(i=f.childNodes[e.startOffset];i&&i.nodeType==3&&!i.data.length;)i=i.nextSibling;if(i)return i.tagName=="BR"&&(u=t.doc.createTextNode("﻿"),i.parentNode.insertBefore(u,i),n=t.createRng(),n.setStartBefore(u),n.setEndAfter(u),r=n.getClientRects(),t.remove(u)),r.length?r[0]:void 0}}var t=u.dom,o=u.getBody(),a=u.dom.getViewPort(u.getWin()),h=a.y,s=20,r,l,i;e=u.selection.getRng();u.inline&&(r=u.selection.getScrollContainer(),r&&r.scrollTop>0&&(h=r.scrollTop));e.getClientRects&&(l=v(e),l?s=h+(l.top-t.getPos(o).y):(s=h,i=e.startContainer,i&&(i.nodeType==3&&i.parentNode!=o&&(i=i.parentNode),i.nodeType==1&&(s=t.getPos(i,r||o).y))));f=t.add(u.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},c);(n.ie||n.gecko)&&t.setStyle(f,"left",t.getStyle(o,"direction",!0)=="rtl"?65535:-65535);t.bind(f,"beforedeactivate focusin focusout",function(n){n.stopPropagation()});f.focus();u.selection.select(f,!0)}function h(){if(f){for(var n;n=u.dom.get("mcepastebin");)u.dom.remove(n),u.dom.unbind(n);e&&u.selection.setRng(e)}f=e=null}function w(){for(var i="",n,f,r=u.dom.select("div[id=mcepastebin]"),t=0;t<r.length;t++)n=r[t],n.firstChild&&n.firstChild.id=="mcepastebin"&&(n=n.firstChild),f=n.innerHTML,i!=c&&(i+=f);return i}function b(n){var r={},t,i,u;if(n&&(n.getData&&(t=n.getData("Text"),t&&t.length>0&&t.indexOf(nt)==-1&&(r["text/plain"]=t)),n.types))for(i=0;i<n.types.length;i++)u=n.types[i],r[u]=n.getData(u);return r}function tt(n){return b(n.clipboardData||u.getDoc().dataTransfer)}function k(n,t){function r(i){function h(n){t&&(u.selection.setRng(t),t=null);s('<img src="'+n.result+'">')}var f,r,e,o=!1;if(i)for(f=0;f<i.length;f++)r=i[f],/^image\/(jpeg|png|gif|bmp)$/.test(r.type)&&(e=new FileReader,e.onload=h.bind(null,e),e.readAsDataURL(r.getAsFile?r.getAsFile():r),n.preventDefault(),o=!0);return o}var i=n.clipboardData||n.dataTransfer;if(u.settings.paste_data_images&&i)return r(i.items)||r(i.files)}function it(n){var t=n.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&t&&t.items&&t.items.length===0}function rt(n){return t.getCaretRangeFromPoint(n.clientX,n.clientY,u.getDoc())}function d(n,t){return t in n&&n[t].length>0}function g(n){return i.metaKeyPressed(n)&&n.keyCode==86||n.shiftKey&&n.keyCode==45}function ut(){u.on("keydown",function(t){function i(n){g(n)&&!n.isDefaultPrevented()&&h()}if(g(t)&&!t.isDefaultPrevented()){if(o=t.shiftKey&&t.keyCode==86,o&&n.webkit&&navigator.userAgent.indexOf("Version/")!=-1)return;if(t.stopImmediatePropagation(),v=(new Date).getTime(),n.ie&&o){t.preventDefault();u.fire("paste",{ieFake:!0});return}h();p();u.once("keyup",i);u.once("paste",function(){u.off("keyup",i)})}});u.on("paste",function(t){var b=(new Date).getTime(),i=tt(t),g=(new Date).getTime()-b,y=(new Date).getTime()-v-g<1e3,e=l.pasteFormat=="text"||o;if(o=!1,t.isDefaultPrevented()||it(t)){h();return}if(k(t)){h();return}y||t.preventDefault();n.ie&&(!y||t.ieFake)&&(p(),u.dom.bind(f,"paste",function(n){n.stopPropagation()}),u.getDoc().execCommand("Paste",!1,null),i["text/html"]=w());setTimeout(function(){var n;if(d(i,"text/html")?n=i["text/html"]:(n=w(),n==c&&(e=!0)),n=r.trimHtml(n),f&&f.firstChild&&f.firstChild.id==="mcepastebin"&&(e=!0),h(),n.length||(e=!0),e&&(n=d(i,"text/plain")&&n.indexOf("<\/p>")==-1?i["text/plain"]:r.innerText(n)),n==c){y||u.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}e?a(n):s(n)},0)});u.on("dragstart dragend",function(n){y=n.type=="dragstart"});u.on("drop",function(n){var f=rt(n),t,i;n.isDefaultPrevented()||y||k(n,f)||f&&u.settings.paste_filter_drop!==!1&&(t=b(n.dataTransfer),i=t["mce-internal"]||t["text/html"]||t["text/plain"],i&&(n.preventDefault(),u.undoManager.transact(function(){t["mce-internal"]&&u.execCommand("Delete");u.selection.setRng(f);i=r.trimHtml(i);t["text/html"]?s(i):a(i)})))});u.on("dragover dragend",function(n){u.settings.paste_data_images&&n.preventDefault()})}var l=this,f,e,v=0,y=!1,c="%MCEPASTEBIN%",o,nt="data:text/mce-internal,";l.pasteHtml=s;l.pasteText=a;u.on("preInit",function(){ut();u.parser.addNodeFilter("img",function(t){var i,r;if(!u.settings.paste_data_images)for(i=t.length;i--;)r=t[i].attributes.map.src,r&&/^(data:image|webkit\-fake\-url)/.test(r)&&(t[i].attr("data-mce-object")||r===n.transparentSrc||t[i].remove())})})}});i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(n,t,i,r,u,f){function e(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)}function s(t){var i,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),n.each(r,function(n){if(n.test(t))return i=!0,!1}),i}function h(n){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(n)}function o(o){var c=o.settings;o.on("BeforePastePreProcess",function(l){function d(n){function p(n){var t="";if(n.type===3)return n.value;if(n=n.firstChild)do t+=p(n);while(n=n.next);return t}function e(n,t){if(n.type===3&&t.test(n.value))return n.value=n.value.replace(t,""),!1;if(n=n.firstChild)do if(!e(n,t))return!1;while(n=n.next);return!0}function w(n){if(n._listIgnore){n.remove();return}if(n=n.firstChild)do w(n);while(n=n.next)}function l(n,i,o){var s=n._listLevel||f;s!=f&&(s<f?t&&(t=t.parent.parent):(r=t,t=null));t&&t.name==i?t.append(n):(r=r||t,t=new u(i,1),o>1&&t.attr("start",""+o),n.wrap(t));n.name="li";s>f&&r&&r.lastChild.append(t);f=s;w(n);e(n,/^\u00a0+/);e(n,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);e(n,/^\u00a0+/)}for(var t,r,f=1,a=[],i=n.firstChild,o,c,v,y;typeof i!="undefined"&&i!==null;)if(a.push(i),i=i.walk(),i!==null)while(typeof i!="undefined"&&i.parent!==n)i=i.walk();for(o=0;o<a.length;o++)if(n=a[o],n.name=="p"&&n.firstChild){if(c=p(n),h(c)){l(n,"ul");continue}if(s(c)){v=/([0-9]+)\./.exec(c);y=1;v&&(y=parseInt(v[1],10));l(n,"ol",y);continue}if(n._listLevel){l(n,"ul",1);continue}t=null}else r=t,t=null}function g(t,i){var r={},f,e=o.dom.parseStyle(i);return(n.each(e,function(n,u){switch(u){case"mso-list":f=/\w+ \w+([0-9]+)/i.exec(i);f&&(t._listLevel=parseInt(f[1],10));/Ignore/i.test(n)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":n!="normal"&&(r[u]=n);return;case"mso-element":if(/^(comment|comment-list)$/i.test(n)){t.remove();return}}if(u.indexOf("mso-comment")===0){t.remove();return}u.indexOf("mso-")!==0&&(y=="all"||b&&b[u])&&(r[u]=n)}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new u("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new u("i",1))),r=o.dom.serializeStyle(r,t.name),r)?r:null}var a=l.content,y,b,p,w,v,k;(a=a.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),a=a.replace(/<br class="?Apple-interchange-newline"?>/gi,""),y=c.paste_retain_style_properties,y&&(b=n.makeMap(y.split(/[, ]/))),c.paste_enable_default_filters!==!1)&&e(l.content)&&(l.wordContent=!0,a=f.filter(a,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),p=c.paste_word_valid_elements,p||(p="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody"),w=new i({valid_elements:p,valid_children:"-li[p]"}),n.each(w.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}),v=new t({},w),v.addAttributeFilter("style",function(n){for(var i=n.length,t;i--;)t=n[i],t.attr("style",g(t,t.attr("style"))),t.name=="span"&&t.parent&&!t.attributes.length&&t.unwrap()}),v.addAttributeFilter("class",function(n){for(var i=n.length,t,r;i--;)t=n[i],r=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r)&&t.remove(),t.attr("class",null)}),v.addNodeFilter("del",function(n){for(var t=n.length;t--;)n[t].remove()}),v.addNodeFilter("a",function(n){for(var u=n.length,i,t,r;u--;){if(i=n[u],t=i.attr("href"),r=i.attr("name"),t&&t.indexOf("#_msocom_")!=-1){i.remove();continue}if(t&&t.indexOf("file://")===0&&(t=t.split("#")[1],t&&(t="#"+t)),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){i.unwrap();continue}i.attr({href:t,name:r})}else i.unwrap()}}),k=v.parse(a),c.paste_convert_word_fake_lists!==!1&&d(k),l.content=new r({},w).serialize(k))})}return o.isWordContent=e,o});i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(n,t,i,r){return function(u){function f(n){u.on("BeforePastePreProcess",function(t){t.content=n(t.content)})}function e(n){var f,e;return i.isWordContent(n)?(f=[],t.each(u.schema.getBlockElements(),function(n,t){f.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+f.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),n=r.filter(n,[[e,"$1"]]),r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):n}function o(n){var t,r,f;return i.isWordContent(n)?n:(t=u.settings.paste_webkit_styles,u.settings.paste_remove_styles_if_webkit===!1||t=="all")?n:(t&&(t=t.split(/[, ]/)),t?(r=u.dom,f=u.selection.getNode(),n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(n,i,u,e){var l=r.parseStyle(u,"span"),s={},o,h,c;if(t==="none")return i+e;for(o=0;o<t.length;o++)h=l[t[o]],c=r.getStyle(f,t[o],!0),/color/.test(t[o])&&(h=r.toHex(h),c=r.toHex(c)),c!=h&&(s[t[o]]=h);return(s=r.serializeStyle(s,"span"),s)?i+' style="'+s+'"'+e:i+e})):n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3"),n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(n,t,i,r){return t+' style="'+i+'"'+r}))}n.webkit&&f(o);n.ie&&f(e)}});i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(n,t,i,r){var u;n.add("paste",function(n){function s(){e.pasteFormat=="text"?(this.active(!1),e.pasteFormat="html"):(e.pasteFormat="text",this.active(!0),u||(n.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),u=!0))}var f=this,e,o=n.settings;if(f.clipboard=e=new t(n),f.quirks=new r(n),f.wordFilter=new i(n),n.settings.paste_as_text&&(f.clipboard.pasteFormat="text"),o.paste_preprocess)n.on("PastePreProcess",function(n){o.paste_preprocess.call(f,f,n)});if(o.paste_postprocess)n.on("PastePostProcess",function(n){o.paste_postprocess.call(f,f,n)});if(n.addCommand("mceInsertClipboardContent",function(n,t){t.content&&f.clipboard.pasteHtml(t.content);t.text&&f.clipboard.pasteText(t.text)}),n.paste_block_drop)n.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault();n.stopPropagation()});if(!n.settings.paste_data_images)n.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&t.files.length>0&&n.preventDefault()});n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:s,active:f.clipboard.pasteFormat=="text"});n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,onclick:s})})});e(["tinymce/pasteplugin/Utils"])})(this);
//# sourceMappingURL=plugin.min.js.map
